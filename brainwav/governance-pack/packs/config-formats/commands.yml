schema_version: "1.0.0"
pack_id: "config-formats"

tools:
  - name: "jq"
    verify: "jq --version"

waiver_model:
  type: "uniform"
  path: ".agentic-governance/waivers/"

targets:
  - name: "config:lint"
    description: "Syntax/format lint for YAML/TOML/JSON (repo-selected tooling)."
    executor: "nx:run-commands"
    command: "pnpm -s config:lint"
    cache: true
    inputs:
      - "{workspaceRoot}/**/*.{yml,yaml,toml,json}"
    ci:
      required: true
      stage: "lint"

  - name: "config:schema:check"
    description: "Schema validation (OpenAPI/JSON Schema/etc.) where applicable."
    executor: "nx:run-commands"
    command: "pnpm -s config:schema:check"
    cache: true
    inputs:
      - "{workspaceRoot}/**/*.{yml,yaml,json}"
      - "{workspaceRoot}/schemas/**"
    ci:
      required: false
      stage: "lint"
